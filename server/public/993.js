"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[993],{993:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(471),l=n(468),r=n(668);const c=(e=!1)=>{const[t,n]=(0,a.useState)(e),l=(0,a.useCallback)((function(){n((e=>!e))}),[]);return[t,l]};var s=n(146);const u=e=>{const[t,{isLoading:n,isSuccess:c,error:u}]=(0,s.nq)(),o=(0,l.wA)(),m=a.useRef(null);return a.useEffect((()=>{c&&m.current&&(o((0,r.TK)(m.current)),e.toggleBudget(),m.current=null)}),[c]),a.createElement("div",null,u&&a.createElement("div",{className:"bg-error p-1"},u.data?.error),a.createElement("form",{onSubmit:e=>{e.preventDefault();const n=e.target,a=new FormData(n).get("budget");m.current={requestType:"budget/set",budget:Number(a)},t(m.current)}},a.createElement("input",{className:"max-w-max",name:"budget",type:"number",defaultValue:e.budget}),a.createElement("button",{disabled:n,type:"submit",className:"btn btn-small"},"Set")))},o=()=>{const e=(0,l.d4)(r.NV),t=(0,l.d4)(r.ZP),[n,s]=c(!1),o=(new Date).toLocaleString("default",{month:"long"}),m=t.reduce(((e,t)=>e+t.amount),0),i=e-m;return a.createElement("div",{className:`inline-block p-1 ${i>=0?"border-green":"border-red"} flow-content`},a.createElement("h2",null,"Budget Overview"),a.createElement("div",null,"Your Current Budget is:",a.createElement("span",{className:"inline-block mx-1"},n?a.createElement(u,{budget:e,toggleBudget:s}):a.createElement("div",{className:"flex items-center"},a.createElement("strong",{className:"text-lg"},"₹ ",e.toLocaleString()),a.createElement("button",{className:"btn btn-small",onClick:s},"Edit")))),a.createElement("div",{className:"flex text-center"},a.createElement("div",null,"Expense of ",a.createElement("strong",null,o)," Month:",a.createElement("strong",{className:"block text-lg"},"₹ ",m.toLocaleString())),a.createElement("div",null,"Remaining Budget of ",a.createElement("strong",null,o)," Month:",a.createElement("strong",{className:"block text-lg"},"₹ ",i.toLocaleString()))))};var m=n(546);const i=()=>{const e=["General","Health","Entertainment","Shopping","Travel","Food"].map((e=>({value:e,label:e}))),[t,n]=a.useState(e),[l,r]=a.useState(null);return a.useEffect((()=>{const e=function(){const e=localStorage.getItem("expense-categories");return e?JSON.parse(e):null}();e&&n(e)}),[]),a.createElement(m.A,{name:"expense-category",isClearable:!0,options:t,value:l,onChange:r,onCreateOption:e=>{const a=e.charAt(0).toUpperCase()+e.slice(1),l={value:a,label:a},c=[...t,l];var s;n(c),r(l),s=c,localStorage.setItem("expense-categories",JSON.stringify(s))},placeholder:"Select / Create Category",required:!0})},d=()=>{const[e,t]=c(!1),[n,{isSuccess:u,isLoading:o,error:m}]=(0,s.nq)(),d=a.useRef(null),g=a.useRef(null),p=(0,l.wA)();return a.useEffect((()=>{u&&null!==g.current&&(p((0,r.TK)(g.current)),d.current.reset(),g.current=null)}),[u]),a.createElement("div",null,a.createElement("button",{className:"btn bg-blue-capri ml-0",onClick:t},e?"Close":"Add Expense"),m&&a.createElement("div",{className:"bg-error p-1"},m.data?.error),e&&a.createElement("form",{ref:d,style:{maxWidth:"500px"},onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),a=t.get("expense-name"),l=t.get("expense-amount"),r=t.get("expense-date"),c=t.get("expense-category");g.current={requestType:"expenses/add",expense:{expenseId:crypto.randomUUID(),name:a,amount:Number(l),date:r,category:c}},n(g.current)},className:"border-form w-full flex flex-col gap-1"},a.createElement("input",{name:"expense-name",type:"text",placeholder:"Expense Name",required:!0}),a.createElement("input",{name:"expense-amount",type:"number",placeholder:"Amount",required:!0}),a.createElement("input",{name:"expense-date",type:"date",min:`${(new Date).getFullYear()}-${(new Date).getMonth()+1}-01`,max:(new Date).toISOString().split("T")[0],required:!0}),a.createElement(i,null),a.createElement("button",{disabled:o,style:{margin:0,fontSize:"1.2rem"},className:"btn bg-blue-france",type:"submit"},"Add")))},g=e=>{const[t,{isLoading:n,isSuccess:c,error:u}]=(0,s.nq)(),o=a.useRef(null),m=(0,l.wA)();return a.useEffect((()=>{c&&null!==o.current&&(m((0,r.TK)(o.current)),o.current=null)}),[c]),a.createElement("div",{className:"card self-start flow-content"},u&&a.createElement("div",{className:"bg-error p-1"},u.data?.error),a.createElement("div",{className:"flex-only flex-wrap gap-1 justify-between"},a.createElement("span",null,"Name: ",a.createElement("h3",null,e.name)),a.createElement("div",null,a.createElement("span",null,"Date: ",a.createElement("p",null,e.date))),a.createElement("span",null,"Amount:"," ",a.createElement("strong",{className:"block"}," ₹ ",e.amount.toLocaleString()))),a.createElement("div",{className:"flex-only justify-between"},a.createElement("span",null,"Category: ",a.createElement("p",null,e.category)),a.createElement("button",{disabled:n,className:"btn bg-error",onClick:()=>{window.confirm("Are you sure you want to delete this item?")&&(o.current={requestType:"expenses/delete",expenseId:e.expenseId},t(o.current))}},"Delete")))},p=e=>{const t=e.items;return a.createElement("div",{className:"grid-three-columns gap-1"},t.map((e=>a.createElement(g,{key:e.expenseId,name:e.name,date:e.date,amount:e.amount,category:e.category,expenseId:e.expenseId}))))},E=()=>{const e=(0,l.d4)(r.ZP);return a.createElement("div",{className:"flow-content"},a.createElement(d,null),a.createElement("h2",null,"Expenses"),a.createElement(p,{items:e}))},b=()=>(0,l.d4)(r.xu)?a.createElement("div",{className:"pb-10 container flow-content"},a.createElement(o,null),a.createElement(E,null)):a.createElement("div",{className:"container"},a.createElement("h2",{className:"text-center"},"Please login to view this page"))}}]);